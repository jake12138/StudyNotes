[toc]

# 1 从字符串中获取转账信息
```go
func ParseTransfersStr(str string) ([]types.TransferUnit, error)
```
**作用描述**:
解析一个特定格式的字符串，将其转换为 []types.TransferUnit 类型的数据结构。在处理这个字符串时，函数可能会产生错误，所以它还返回一个 error 类型的值。在区块链上下文中，这个方法用于将用户输入或其他来源的字符串解析为一系列转账信息。
**参数**:
- <font color=red>str</font>: 描述转账信息的特定格式的字符串。其格式为
 "<账户地址1> <转账金额1>
 <账户地址2> <转账金额2>"

**返回值**:、
- <font color=red>types.TransferUnit</font>:参考[types.TransferUnit](100_各个类型定义.md#5-typestransferunit类型)

**代码示例**:
```go
var transInfo string = `ex1qj5c07sm6jetjz8f509qtrxgh4psxkv3ddyq7u 0.1okt
ex1sgwvwh08vcll07kqke5etv233ljqqjdlt6cgfr 1.2okt`

unit, err := utils.ParseTransfersStr(transInfo)
if err != nil {
    fmt.Println("transfers info convert failed:", err.Error())
} else {
    for i, item := range unit {
        fmt.Printf("the %d item: addr=%s, amount=%v\n", i, item.To, item.Coins.String())
    }
}

// 运行结果
/*
the 0 item: addr=ex1qj5c07sm6jetjz8f509qtrxgh4psxkv3ddyq7u, amount=0.100000000000000000okt
the 1 item: addr=ex1sgwvwh08vcll07kqke5etv233ljqqjdlt6cgfr, amount=1.200000000000000000okt
*/
```

# 2 同时给多个账户转账
```go
type TokenTx interface {
    // 给一个指定账户转账
	Send(fromInfo keys.Info, passWd, toAddrStr, coinsStr, memo string, accNum, seqNum uint64) (sdk.TxResponse, error)

    // 同时给多个账户转账
	MultiSend(fromInfo keys.Info, passWd string, transfers []types.TransferUnit, memo string, accNum, seqNum uint64) (
		sdk.TxResponse, error)
}
```
**参数**：
|参数名称|参数类型|描述|
|-------|--------|----|
|fromInfo|keys.Info|公密钥相关信息|
|passWd|string|创建账户时设置的密码|
|transfers|[]types.TransferUnit|转账相关信息|
|meno|string|转账的备注|
|accNum|uint64|发送方的账户号码|
|seqNum|uint64|发送方的账户序列号|

**代码示例**：
```go
package mytest

import (
    "fmt"
    sdk "github.com/okex/exchain-go-sdk"
    "github.com/okex/exchain-go-sdk/utils"
    "log"
)

const (
    // TODO: link to mainnet of ExChain later
    rpcURL = "https://exchaintesttmrpc.okex.org"
    // user's name
    name = "alice"
    // user's mnemonic
    //mnemonic = "giggle sibling fun arrow elevator spoon blood grocery laugh tortoise culture tool"
    mnemonic = "expire lesson shoot glory double spirit enhance prison flip agree spawn model"
    // user's password
    passWd = "Jake123"
    
    baseCoin = "okt"
)

func TestRun1() {
    config, err := sdk.NewClientConfig(rpcURL, "exchain-65", sdk.BroadcastBlock, "0.001okt", 98138,
        0, "")
    if err != nil {
        log.Fatal(err)
    }
    client := sdk.NewClient(config)

    // 使用给定的名称和密码创建账户信息
    info, _, err := utils.CreateAccountWithMnemo(mnemonic, name, passWd)
    if err != nil {
        fmt.Printf("create account failed:%s\n", err.Error())
        panic("create account failed!")
    }

    account, err := client.Auth().QueryAccount(info.GetAddress().String())

    transferUit, err := utils.ParseTransfersStr("0xC3C250CD18AC910BE1E7898693968829224AF6B8 0.01okt")
    if err != nil {
        log.Fatal("parse transfer failed:", err.Error())
    }

    tx_res, err := client.Token().MultiSend(info, "Jake123", transferUit, "transfer test", account.GetAccountNumber(), account.GetSequence())
    if err != nil {
        log.Fatal("multi send failed:", err.Error())
    }
    fmt.Println("multiSend res:", tx_res)
}

```